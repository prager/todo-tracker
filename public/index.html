<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo Tracker</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="icon" type="image/svg+xml" href="/jlk-icon.svg" />
  </head>
  <body class="bg-light">
    <div class="container py-4">
      <h1 class="mb-4 d-flex align-items-center gap-2">
        <img src="/jlk-icon.svg" alt="JLK" width="32" height="32" />
        <span>Daily To-Do Tracker</span>
      </h1>

      <div id="alertBox" class="alert d-none" role="alert"></div>

      <div class="card mb-4">
        <div class="card-body">
          <h2 class="h5">Add task</h2>
          <form id="todoForm" class="row g-3">
            <div class="col-md-6">
              <label class="form-label" for="title">Task title</label>
              <input class="form-control" id="title" required />
            </div>
            <div class="col-md-3">
              <label class="form-label" for="dueDate">Due date</label>
              <input class="form-control" id="dueDate" type="date" />
            </div>
            <div class="col-12">
              <label class="form-label" for="notes">Notes</label>
              <textarea class="form-control" id="notes" rows="2"></textarea>
            </div>
            <div class="col-12 d-flex flex-wrap gap-4">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="emailOnCreate"
                />
                <label class="form-check-label" for="emailOnCreate">
                  Email when task is created
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="emailOnComplete"
                />
                <label class="form-check-label" for="emailOnComplete">
                  Email when a task is complete
                </label>
              </div>
            </div>
            <div class="col-12">
              <button class="btn btn-primary" type="submit">Create task</button>
            </div>
          </form>
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-body">
          <h2 class="h5">Email Settings</h2>
          <form id="emailSettingsForm" class="row g-2 align-items-end">
            <div class="col-md-6">
              <label class="form-label" for="recipientEmail"
                >Recipient email</label
              >
              <input
                class="form-control"
                id="recipientEmail"
                type="email"
                placeholder="name@example.com"
                required
              />
            </div>
            <div class="col-auto">
              <button class="btn btn-outline-primary" type="submit">
                Save email
              </button>
            </div>
          </form>
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="h5 mb-0">Tasks</h2>
            <button id="refreshBtn" class="btn btn-outline-secondary btn-sm">
              Refresh
            </button>
          </div>
          <div class="table-responsive">
            <table class="table table-striped align-middle">
              <thead>
                <tr>
                  <th>
                    <button
                      id="sortTitleBtn"
                      class="btn btn-link p-0 text-decoration-none fw-semibold"
                      type="button"
                    >
                      Title
                      <span id="sortTitleIndicator" class="text-muted"></span>
                    </button>
                  </th>
                  <th>
                    <button
                      id="sortDueBtn"
                      class="btn btn-link p-0 text-decoration-none fw-semibold"
                      type="button"
                    >
                      Due <span id="sortDueIndicator" class="text-muted"></span>
                    </button>
                  </th>
                  <th>
                    <button
                      id="sortCreatedBtn"
                      class="btn btn-link p-0 text-decoration-none fw-semibold"
                      type="button"
                    >
                      Created
                      <span id="sortCreatedIndicator" class="text-muted"></span>
                    </button>
                  </th>
                  <th>
                    <button
                      id="sortStatusBtn"
                      class="btn btn-link p-0 text-decoration-none fw-semibold"
                      type="button"
                    >
                      Status
                      <span id="sortStatusIndicator" class="text-muted"></span>
                    </button>
                  </th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="todoTable"></tbody>
            </table>
          </div>
          <div
            id="paginationContainer"
            class="d-flex justify-content-between align-items-center mt-3 d-none"
          >
            <small id="paginationInfo" class="text-muted"></small>
            <div class="btn-group" role="group" aria-label="Task pagination">
              <button
                id="prevPageBtn"
                class="btn btn-outline-secondary btn-sm"
                type="button"
              >
                Previous
              </button>
              <button
                id="nextPageBtn"
                class="btn btn-outline-secondary btn-sm"
                type="button"
              >
                Next
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h2 class="h5">Reports</h2>
          <p class="text-muted">Generate and download completion reports.</p>
          <form id="reportFilterForm" class="row g-2 align-items-end mb-3">
            <div class="col-sm-4 col-md-3">
              <label class="form-label" for="reportStartDate">Start date</label>
              <input class="form-control" type="date" id="reportStartDate" />
            </div>
          </form>
          <div class="d-flex flex-wrap gap-2 mb-3">
            <button
              class="btn btn-outline-success download-btn"
              data-period="daily"
            >
              Download daily CSV
            </button>
            <button
              class="btn btn-outline-success download-btn"
              data-period="weekly"
            >
              Download weekly CSV
            </button>
            <button
              class="btn btn-outline-success download-btn"
              data-period="monthly"
            >
              Download monthly CSV
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="bg-dark text-white py-3 mt-4">
      <div class="container text-center">
        Created by:
        <a
          class="text-white text-decoration-none"
          href="https://jlkconsulting.info"
          target="_blank"
          rel="noopener noreferrer"
        >
          &copy; jlkconsulting.info
        </a>
        <span id="footerYear"></span>
      </div>
    </footer>

    <div
      class="modal fade"
      id="editNoteModal"
      tabindex="-1"
      aria-labelledby="editNoteModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <form id="editNoteForm">
            <div class="modal-header">
              <h5 class="modal-title" id="editNoteModalLabel">Edit Task</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="mb-2 small text-muted" id="editNoteTaskTitle"></div>
              <label class="form-label" for="editTitleText">Title</label>
              <input class="form-control mb-3" id="editTitleText" required />
              <label class="form-label" for="editNoteText">Note</label>
              <textarea
                class="form-control"
                id="editNoteText"
                rows="5"
              ></textarea>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-outline-secondary"
                data-bs-dismiss="modal"
              >
                Cancel
              </button>
              <button type="submit" class="btn btn-primary">Save note</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="/app.js"></script>
  </body>
</html>
